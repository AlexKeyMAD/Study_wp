<head>
    <link rel="stylesheet" href="../../../css/books_style.css">
</head>

<body>
    <div>
        <p><a href="./02_03.html">&lArr;SFML и Visual Studio</a></p>
        <h1>Использование OpenGL в окне SFML</h1>
        <hr>
        <h2>Вступление</h2>
        <p>Это руководство не о самом OpenGL, а скорее о том, как использовать SFML в качестве среды для OpenGL и как смешивать их вместе.</p>
        <p>Как вы знаете, одной из важнейших особенностей OpenGL является переносимость. Но одного OpenGL будет недостаточно для создания полных программ: вам нужно окно, контекст рендеринга, пользовательский ввод и т. д. У вас не будет другого выбора, кроме
            как написать код для конкретной ОС, чтобы обрабатывать все это самостоятельно. Вот где в игру вступает модуль sfml-window. Давайте посмотрим, как это позволяет вам играть с OpenGL.</p>
        <hr>
        <h2>Включение и привязка OpenGL к вашему приложению</h2>
        <p>Заголовки OpenGL не одинаковы для каждой ОС. Поэтому SFML предоставляет «абстрактный» заголовок, который позаботится о том, чтобы включить нужный файл.</p>
        <code>
            <p class="cpp_code">#include &lt;SFML/OpenGL.hpp&gt;</p>
        </code>
        <p>Этот заголовок включает в себя функции OpenGL и ничего больше. Иногда люди думают, что SFML автоматически включает заголовки расширений OpenGL, потому что SFML сам загружает расширения, но это деталь реализации. С точки зрения пользователя загрузка
            расширения OpenGL должна обрабатываться так же, как и любая другая внешняя библиотека.</p>
        <p>Затем вам нужно будет связать вашу программу с библиотекой OpenGL. В отличие от того, что он делает с заголовками, SFML не может предоставить унифицированный способ связывания OpenGL. Следовательно, вам нужно знать, на какую библиотеку ссылаться
            в зависимости от используемой операционной системы («opengl32» в Windows, «GL» в Linux и т. д.).</p>
        <div class="atention">
            <p>Функции OpenGL начинаются с префикса «gl». Помните об этом, когда вы получаете ошибки компоновщика, это поможет вам найти библиотеку, которую вы забыли связать.</p>
        </div>
        <hr>
        <h2>Создание окна OpenGL</h2>
        <p>Поскольку SFML основан на OpenGL, его окна готовы к вызовам OpenGL без каких-либо дополнительных усилий.</p>
        <img src="./02_04_01.png" alt="">
        <p>Если вы считаете, что это слишком автоматически, конструктор sf::Window имеет дополнительный аргумент, который позволяет вам изменить настройки базового контекста OpenGL. Этот аргумент является экземпляром структуры sf::ContextSettings, он предоставляет
            доступ к следующим настройкам:</p>
        <ul>
            <li>depthBits — количество битов на пиксель, используемое для буфера глубины (0, чтобы отключить его).</li>
            <li>stencilBits — количество битов на пиксель, используемое для буфера трафарета (0, чтобы отключить его).</li>
            <li>antialiasingLevel — уровень мультисэмплинга</li>
            <li>majorVersion и minorVersion содержат запрошенную версию OpenGL.</li>
        </ul>
        <img src="./02_04_02.png" alt="">
        <p>Если какой-либо из этих параметров не поддерживается графической картой, SFML пытается найти ближайшее допустимое совпадение. Например, если 4-кратное сглаживание слишком велико, он пытается использовать 2-кратное сглаживание, а затем возвращается
            к 0.</p>
        <p>В любом случае вы можете проверить, какие настройки SFML на самом деле использовал с помощью функции getSettings:</p>
        <img src="./02_04_03.png" alt="">
        <div class="atention">
            <p>Версии OpenGL выше 3.0 поддерживаются SFML (если ваш графический драйвер может их обрабатывать). Поддержка выбора профиля контекстов 3.2+ и установки флага отладки контекста была добавлена в SFML 2.3. Флаг прямой совместимости не поддерживается.
                По умолчанию SFML создает контексты 3.2+, используя профиль совместимости, поскольку графический модуль использует устаревшие функции OpenGL. Если вы собираетесь использовать графический модуль, обязательно создайте свой контекст без настройки
                основного профиля, иначе графический модуль не будет работать правильно. В OS X SFML поддерживает создание контекстов OpenGL 3.2+ только с использованием основного профиля. Если вы хотите использовать графический модуль в OS X, вы ограничены
                использованием устаревшего контекста, который подразумевает OpenGL версии 2.1.</p>
        </div>
        <p><a href="./02_05.html">&rArr;</a></p>
    </div>
</body>