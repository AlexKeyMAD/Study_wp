<head>
    <link rel="stylesheet" href="../../../css/books_style.css">
</head>

<body>
    <div>
        <p><a href="./03_08.html">&lArr;Управление 2D-камерой с видами</a></p>
        <h1>Воспроизведение звуков и музыки</h1>
        <hr>
        <h2>Звук или музыка?</h2>
        <p>SFML предоставляет два класса для воспроизведения аудио: sf::Sound и sf::Music. Они оба предоставляют более или менее одинаковые функции, главное отличие заключается в том, как они работают.</p>
        <p>sf::Sound — это легкий объект, который воспроизводит загруженные аудиоданные из sf::SoundBuffer. Его следует использовать для небольших звуков, которые могут поместиться в памяти и не должны отставать при воспроизведении. Примерами являются выстрелы
            из оружия, шаги и т. д.</p>
        <p>sf::Music не загружает все аудиоданные в память, а передает их на лету из исходного файла. Обычно он используется для воспроизведения сжатой музыки, которая длится несколько минут, и в противном случае потребовалось бы много секунд для загрузки
            и использования сотен МБ памяти.</p>
        <hr>
        <h2>Загрузка и воспроизведение звука</h2>
        <p>Как упоминалось выше, звуковые данные хранятся не непосредственно в sf::Sound, а в отдельном классе с именем sf::SoundBuffer. Этот класс инкапсулирует аудиоданные, которые в основном представляют собой массив 16-битных целых чисел со знаком (называемых
            «аудиосэмплами»). Сэмпл — это амплитуда звукового сигнала в данный момент времени, поэтому массив сэмплов представляет собой полный звук.</p>
        <div class="atention">
            <p>На самом деле классы sf::Sound/sf::SoundBuffer работают так же, как sf::Sprite/sf::Texture из графического модуля. Итак, если вы понимаете, как спрайты и текстуры работают вместе, вы можете применить ту же концепцию к звукам и звуковым буферам.</p>
        </div>
        <p>Вы можете загрузить звуковой буфер из файла на диске с помощью его функции loadFromFile:</p>
        <img src="./04_01_01.png" alt="">
        <p>Как и во всем остальном, вы также можете загрузить аудиофайл из памяти (loadFromMemory) или из пользовательского входного потока (loadFromStream).</p>
        <p>SFML поддерживает форматы аудиофайлов WAV, OGG/Vorbis и FLAC. Из-за проблем с лицензией MP3 не поддерживается.</p>
        <p>Вы также можете загрузить звуковой буфер непосредственно из массива семплов, если они происходят из другого источника:</p>
        <img src="./04_01_02.png" alt="">
        <p>Поскольку loadFromSamples загружает необработанный массив сэмплов, а не аудиофайл, для полного описания звука требуются дополнительные аргументы. Первый (третий аргумент) — количество каналов; 1 канал определяет монофонический звук, 2 канала определяют
            стереофонический звук и т. д. Второй дополнительный атрибут (четвертый аргумент) — частота дискретизации; он определяет, сколько сэмплов должно воспроизводиться в секунду, чтобы восстановить исходный звук.</p>
        <p>Теперь, когда аудиоданные загружены, мы можем воспроизвести их с помощью экземпляра sf::Sound.</p>
        <img src="./04_01_03.png" alt="">
        <p>Круто то, что вы можете назначить один и тот же звуковой буфер нескольким звукам, если хотите. Вы даже можете играть в них вместе без каких-либо проблем.</p>
        <div class="atention">
            <p>Звуки (и музыка) воспроизводятся в отдельном потоке. Это означает, что вы можете делать все, что хотите, после вызова play() (кроме уничтожения звука или его данных, конечно), звук будет продолжать воспроизводиться до тех пор, пока не закончится
                или явно не остановится.</p>
        </div>
        <hr>
        <h2>Playing a music</h2>
        <p><a href="./04_02.html">&rArr;</a></p>
    </div>
</body>