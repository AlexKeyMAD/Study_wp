<head>
    <link rel="stylesheet" href="../../../css/books_style.css">
</head>

<body>
    <div>
        <p><a href="./05_02.html">&lArr;Использование и расширение пакетов</a></p>
        <h1>Веб-запросы с HTTP</h1>
        <hr>
        <h2>Вступление</h2>
        <p>SFML предоставляет простой класс HTTP-клиента, который можно использовать для связи с HTTP-серверами. «Простой» означает, что он поддерживает самые основные функции HTTP: типы запросов POST, GET и HEAD, доступ к полям заголовков HTTP и чтение/запись
            тела страницы.</p>
        <p>Если вам нужны более продвинутые функции, такие как, например, защищенный HTTP (HTTPS), вам лучше использовать настоящую библиотеку HTTP, такую как libcurl или cpp-netlib.</p>
        <p>Для базового взаимодействия между вашей программой и HTTP-сервером этого должно быть достаточно.</p>
        <hr>
        <h2>sf::Http</h2>
        <p>Для связи с HTTP-сервером вы должны использовать класс sf::Http.</p>
        <img src="./05_03_01.png" alt="">
        <p>Обратите внимание, что установка хоста не вызывает никакого соединения. Для каждого запроса создается временное соединение.</p>
        <p>Единственная другая функция в sf::Http — отправляет запросы. Это в основном все, что делает класс.</p>
        <img src="./05_03_02.png" alt="">
        <hr>
        <h2>Запросы</h2>
        <p>HTTP-запрос, представленный классом sf::Http::Request, содержит следующую информацию:</p>
        <ul>
            <li>Метод: POST (отправить контент), GET (получить ресурс), HEAD (получить заголовок ресурса без его тела)</li>
            <li>URI: адрес ресурса (страница, изображение и т. д.), который необходимо получить или опубликовать, относительно корневого каталога.</li>
            <li>Версия HTTP (по умолчанию 1.0, но вы можете выбрать другую версию, если используете определенные функции)</li>
            <li>Заголовок: набор полей с ключом и значением</li>
            <li>Тело страницы (используется только с методом POST)</li>
        </ul>
        <img src="./05_03_03.png" alt="">
        <p>SFML автоматически заполняет обязательные поля заголовка, такие как «Host», «Content-Length» и т. д. Вы можете отправлять свои запросы, не беспокоясь о них. SFML сделает все возможное, чтобы убедиться, что они действительны.</p>
        <hr>
        <h2>Ответы</h2>
        <p>Если класс sf::Http может успешно подключиться к хосту и отправить запрос, ответ отправляется обратно и возвращается пользователю, инкапсулированный в экземпляре класса sf::Http::Response. Ответы содержат следующие члены:</p>
        <ul>
            <li>Код состояния, который точно указывает, как сервер обработал запрос (ОК, перенаправлен, не найден и т. д.).</li>
            <li>HTTP-версия сервера</li>
            <li>Заголовок: набор полей с ключом и значением</li>
            <li>Тело ответа</li>
        </ul>
        <img src="./05_03_04.png" alt="">
        <p>Код состояния можно использовать для проверки того, был ли запрос успешно обработан или нет: коды 2xx представляют успех, коды 3xx представляют собой перенаправление, коды 4xx представляют ошибки клиента, коды 5xx представляют ошибки сервера,
            а коды 10xx представляют специфические ошибки SFML, которые не являются часть стандарта HTTP.</p>
        <hr>
        <h2>Пример: отправка результатов на онлайн-сервер</h2>
        <p>Вот краткий пример, демонстрирующий, как выполнить простую задачу: отправить счет в онлайн-базу данных.</p>
        <img src="./05_03_05.png" alt="">
        <p>Конечно, это очень простой способ обработки онлайн-счетов. Защиты нет: любой может легко отправить ложный результат. Более надежный подход, вероятно, будет включать дополнительный параметр, например хэш-код, который гарантирует, что запрос был
            отправлен программой. Это выходит за рамки этого урока.</p>
        <p>И, наконец, вот очень простой пример того, как может выглядеть страница PHP на сервере.</p>
        <img src="./05_03_06.png" alt="">
        <hr>
        <p><a href="./05_04.html">Передача файлов по FTP&rArr;</a></p>
    </div>
</body>