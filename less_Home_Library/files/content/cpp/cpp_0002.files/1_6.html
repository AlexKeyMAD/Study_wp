<head>
    <link rel="stylesheet" href="../../css/books_style.css">
</head>

<body>
    <div class="book-title">
        <p><a href="./1_5.html">&lArr;</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./1_7.html">&rArr;</a></p>
        <h2>1.6. Константы</h2>
        <hr>
        <div>
            <p>С++ поддерживает два понятия неизменяемости.</p>
            <ul>
                <li>const: грубо говоря, это означает "я обещаю не изменять это значение". Это ключевое слово используется главным образом для указания интерфейсов, так что данные могут передаваться в функции с использованием указателей и ссылок, не боясь,
                    что они будут модифицированы. Компилятор заставляет выполнять обещание, сделанное с помощью const. Значение const может быть вычислено во время выполнения.</li>
                <li>constexpr: грубо говоря, это означает "вычисляется во время компиляции". Это ключевое слово используется главным образом для определения констант, разрешая размещение данных в памяти, предназначенной только для чтения (где они вряд ли
                    окажутся повреждены), и для повышения производительности. Значение constexpr должно быть вычислено компилятором.</li>
            </ul>
            <p>Например:</p>
            <img src="./1_6_p001.png" alt="">
            <p>Чтобы функция могла использоваться в константном выражении, т.е. в выражении, которое будет вычисляться компилятором, она должна быть определена как constexpr. Например:</p>
            <img src="./1_6_p002.png" alt="">
            <p>Функция, объявленная как constexpr, может применяться к неконстантным аргументам, но когда это происходит, результат не является константным выражением. Функция, объявленная как constexpr, может вызываться с аргументами, не являющимися константными
                выражениями, в контекстах, которые не требуют константных выражений. Таким образом, нам не приходится определять, по сути, одну и ту же функцию дважды: один раз - для константных выражений и второй - для переменных.</p>
            <p>Чтобы быть объявленной как constexpr, функция должна быть достаточно простой, не должна иметь побочных действий и может использовать только информацию, переданную ей в качестве аргументов. В частности, она не может изменять нелокальные переменные,
                но может содержать циклы и использовать собственные локальные переменные. Например:</p>
            <img src="./1_6_p003.png" alt="">
            <p>В ряде мест константные выражения требуются правилами языка (например, для границ массивов (§1.7), в метках case (§1.8), аргументах - значениях шаблонов (§6.2) и константах, объявленных с использованием constexpr). В других случаях вычисления
                времени компиляции оказываются важными с точки зрения производительности программы. Независимо от проблем с производительностью понятие неизменности (объекта с неизменным состоянием) является важной концепцией проектирования.</p>
        </div>
    </div>
</body>