<head>
    <link rel="stylesheet" href="../../css/books_style.css">
</head>

<body>
    <div class="book-title">
        <p><a href="./4_5_1.html">&lArr;4.5.1 Преимущества иерархий</a>&nbsp;&nbsp;&nbsp;<a href="../cpp_0002.html">Содержание</a>&nbsp;&nbsp;&nbsp;<a href="./4_5_3.html">4.5.3 Избежание утечки ресурсов&rArr;</a></p>
        <h2>4.5.2. Навигация по иерархии</h2>
        <hr>
        <div>
            <p>Функция read_shape() возвращает Shape*, так что мы можем рассматривать все фигуры единообразно. Однако что нам делать, если мы захотим использовать функцию-член, имеющуюся только в определенном производном классе, как, например, wink() в классе
                Srniley? Мы можем запросить, "является ли данная фигура Srniley?", воспользовавшись оператором dynarnic cast: </p>
            <img src="./4_5_2_p001.png" alt="">
            <p>Если во время выполнения объект, на который указывает аргумент dynarnic _ cast (в данном случае - ps) не имеет ожидаемого типа (в данном случае - Srniley) или типа класса, производного от ожидаемого, то dynarnic_cast возвращает nullptr. </p>
            <p>Мы используем приведение dynarnic _ cast к типу указателя, когда аргумент представляет собой корректный указатель. Затем мы проверяем, является ли результат равным nullptr. Эту проверку часто удобно помещать в инициализацию переменной в условии.</p>
            <p>Мы можем использовать dynarnic_cast и для приведения к ссылочному типу. Если объект не относится к ожидаемому типу, dynarnic cast в этом случае генерирует исключение bad_cast: </p>
            <img src="./4_5_2_p002.png" alt="">
            <p>Код будет более чистым, если dynarnic_cast используется с ограничениями. Если мы сможем избежать использования информации о типе, то сможем написать более простой и эффективный код. Но иногда информация о типе теряется и должна быть восстановлена.
                Обычно это происходит, когда мы передаем объект какой-либо системе, которая принимает интерфейс, определенный базовым классом. Когда эта система позже возвращает объект обратно, нам, возможно, потребуется восстановить его исходный тип.
                Операции, похожие на dynamic cast, известны как операции "является разновидностью" или "является экземпляром".</p>
        </div>
    </div>
</body>