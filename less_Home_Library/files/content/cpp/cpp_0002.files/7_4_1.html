<head>
    <link rel="stylesheet" href="../../css/books_style.css">
</head>

<body>
    <div class="book-title">
        <p><a href="./7_4.html">&lArr;7.4 Вариативные шаблоны</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./7_4_2.html">7.4.2 Передача аргументов&rArr;</a></p>
        <h2>7.4.1. Выражения свертки</h2>
        <hr>
        <div>
            <p>Чтобы упростить реализацию простых вариативных шаблонов, С++ 17 предлагает ограниченную форму итерации по элементам пакета параметров. Например:
            </p>
            <img src="./7_4_1_p001.png" alt="">
            <p>Здесь sum() может принимать любое количество элементов любого типа. В предположении, что sum() действительно суммирует свои аргументы, мы получаем
            </p>
            <img src="./7_4_1_p002.png" alt="">
            <p>Тело sum использует выражение свертки:</p>
            <img src="./7_4_1_p003.png" alt="">
            <p>Здесь (v+...+О) означает прибавление всех элементов v к начальному значению О. Первым прибавляется крайний справа аргумент (имеющий наивысший индекс): (v[О] + (v[1] + (v[2] + (v[3] + (v[4] + О))))). То есть суммирование начинается справа,
                где находится О. Такое действие называется правой сверткой (right fold). В качестве альтернативы мы можем использовать левую свертку (left fold):
            </p>
            <img src="./7_4_1_p004.png" alt="">
            <p>Теперь первым прибавляется аргумент, крайний слева (с наименьшим индексом): (((((O + v[О]) + v[1]) + v[2]) + v[3]) + v[4]). То есть суммирование начинается слева, где находится О. </p>
            <p>Свертка (fold) представляет собой очень мощную абстракцию, очевидным образом связанную с алгоритмом accumulate () стандартной библиотеки, со множеством имен в разных языках и сообществах. В С++ выражения свертки в настоящее время ограничены
                упрощением реализации вариативных шаблонов. Свертка не обязана выполнять только числовые вычисления. Рассмотрим знаменитый пример: </p>
            <img src="./7_4_1_p005.png" alt="">
            <p>Многие сценарии просто включают набор значений, которые могут быть преобразованы в общий тип. В таких случаях простое копирование аргументов в вектор или желаемый тип часто упрощает дальнейшее использование: </p>
            <img src="./7_4_1_p006.png" alt="">
            <p>Мы можем использовать to_vector следующим образом: </p>
            <img src="./7_4_1_p007.png" alt="">
        </div>
    </div>
</body>