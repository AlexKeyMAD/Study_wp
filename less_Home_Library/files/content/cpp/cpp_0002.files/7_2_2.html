<head>
    <link rel="stylesheet" href="../../css/books_style.css">
</head>

<body>
    <div class="book-title">
        <p><a href="./7_2_1.html">&lArr;7.2.1 Применение концептов</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./7_2_3.html">7.2.3 Корректный код&rArr;</a></p>
        <h2>7.2.2. Перегрузка на основе концептов</h2>
        <hr>
        <div>
            <p>Как только мы правильно определили шаблоны с их интерфейсами, мы можем выполнять перегрузку на основе их свойств, как делали это для функций. Рассмотрим немного упрощенную функцию стандартной библиотеки advance(), которая передвигает итератор(§
                12.3):
            </p>
            <img src="./7_2_2_p001.png" alt="">
            <p>Компилятор выберет шаблон с наиболее строгими требованиями, которым удовлетворяют аргументы. list поддерживает однонаправленные итераторы, но не итераторы с произвольным доступом, которые поддерживает vector, поэтому мы получаем</p>
            <img src="./7_2_2_p002.png" alt="">
            <p>Подобно другим перегрузкам, это механизм времени компиляции, не влекущий накладные расходы времени выполнения. Если компилятор не находит наилучший вариант, он сообщает об ошибке неоднозначности. Правила перегрузки на основе концептов намного
                проще, чем правила общей перегрузки (§ 1.3). Рассмотрим сначала единственный аргумент для нескольких альтернативных функций.</p>
            <ul>
                <li>Если аргумент не соответствует концепту, данная альтернатива не может быть выбрана.</li>
                <li>Если аргумент соответствует концепту только в одной альтернативе, то выбирается именно эта альтернатива.</li>
                <li>Если аргументы двух альтернатив одинаково хорошо соответствуют концепту, мы сталкиваемся с неоднозначностью.</li>
                <li>Если аргументы двух альтернатив соответствуют концепту и один из них более строгий, чем другой (соответствует всем тем же требованиям, что и другой, и еще некоторым), то выбирается именно эта альтернатива. </li>
            </ul>
            <p>Для выбранной альтернативы должны выполняться следующие условия: </p>
            <ul>
                <li>соответствие всех аргументов; при этом</li>
                <li>соответствие всех аргументов как минимум столь же хорошее, как и для других альтернатив; при этом</li>
                <li>лучшее соответствие как минимум одного аргумента. </li>
            </ul>
        </div>
    </div>
</body>