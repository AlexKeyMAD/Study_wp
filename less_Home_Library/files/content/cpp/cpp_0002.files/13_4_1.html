<head>
    <link rel="stylesheet" href="../../css/books_style.css">
</head>

<body>
    <div class="book-title">
        <p><a href="./13_4.html">&lArr;13.4 Специализированные контейнеры</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./13_4_2.html">13.4.2 bitset&rArr;</a></p>
        <h2>13.4.1. array</h2>
        <hr>
        <div>
            <p>array, определенный в заголовочном файле &lt;array&gt;, представляет собой последовательность элементов определенного типа с фиксированным размером, который указывается во время компиляции. Таким образом, массив может быть размещен со своими
                элементами в стеке, в объекте или в статической памяти. Элементы расположены в области видимости, где определен array. Лучше всего воспринимать array как встроенный массив с жестко определенным размером, без неявных, потенциально неожиданных
                преобразований к типам указателей и с несколькими вспомогательными функциями. Нет никаких накладных расходов (времени или памяти), связанных с использованием array по сравнению с использованием встроенного массива. array не следует модели
                "дескриптора элементов" контейнеров STL. Вместо этого array непосредственно содержит свои элементы. </p>
            <p>array может быть инициализирован с помощью списка инициализации: </p>
            <img src="./13_4_1_p001.png" alt="">
            <p>Количество элементов должно быть константным выражением:</p>
            <img src="./13_4_1_p002.png" alt="">
            <p>Если вам нужен контейнер с переменным количеством элементов, используйте vector.</p>
            <p>При необходимости array может быть явно передан в функцию в стиле С, ожидающую указатель. Например:</p>
            <img src="./13_4_1_p003.png" alt="">
            <p>Зачем нам использовать array, если vector намного более гибкий? array менее гибок, поэтому он проще. Иногда существенную роль играет преимущество в производительности, которое достигается благодаря прямому доступу к элементам, выделенным в
                стеке, вместо выделения элементов в динамической памяти с косвенным обращением через vector (дескриптор) и последующим их освобождением. С другой стороны, стек является ограниченным ресурсом (особенно в некоторых встроенных системах),
                и его переполнение оказывается весьма неприятным.</p>
            <p>Зачем использовать vector, если можно использовать встроенный массив? vector знает свой размер, поэтому его легко использовать с алгоритмами стандартной библиотеки и его можно копировать с помощью оператора=. Однако главная причина, по которой
                я предпочитаю массив, состоит в том, что он избавляет меня от неожиданных и неприятных преобразований в указатели. Рассмотрим следующий код:</p>
            <img src="./13_4_1_p004.png" alt="">
            <p>Комментарий о неприятностях подразумевает, что sizeof(Shape)&lt;size of (Circle), так что индексация Circle[] с использованием Shape* дает неверное смещение. Все стандартные контейнеры обладают этим преимуществом перед встроенными массивами.
                </p>
        </div>
    </div>
</body>